---
Theme: "[[Database]]"
---
## Общие принципы

- **Думать о будущем развитии БД — это не оверинжиниринг.**  
  Не обязательно реализовывать все сразу, но важно закладывать фундамент при проектировании, чтобы понимать, какие изменения возможны и как они повлияют на изначальную структуру.

---

## Логическое моделирование

1. **Описание бизнес-процесса:**  
   Напишите в двух-трёх абзацах, из чего состоит ваш бизнес-процесс. Это поможет сформировать общую картину и выявить основные элементы.

2. **Поиск анкеров (entities):**  
   Анкеры — это основные сущности, которые можно посчитать. Они часто обозначаются существительными (например, тренер, клиент, навык, слот, бронь, спортзал).  
   - **Признак анкера:** У него можно определить количество. Например, у вас 3 тренера, и вы можете добавить ещё одного.  
   - **Таблица:** Каждому анкеру обычно соответствует отдельная таблица (хотя бывают исключения).

3. **Атрибуты (где хранятся данные):**  
   Атрибуты описывают свойства анкеров.  
   - Пример: У тренера — имя, у слота — время, у навыка — название.  
   - **Проверка атрибута:**  
     - Задавайте правильные вопросы: *Как зовут тренера? На какое время назначен слот? Как называется навык?*  
     - Определите тип атрибута:  
       - Имя — строка.  
       - Время слота — время.  
       - Навык — enum.

4. **Линки (связи между анкерами):**  
   Линки соединяют два анкера. Пример: *Какие навыки есть у каждого тренера?*  
   - **Ключевые слова:** Используйте в описании связи слова "несколько" и "только один".  
   - Пример:
     - Тренер обладает **несколькими** навыками.  
     - Навык может быть у **нескольких** тренеров.  
       - Координальность: M:N.

5. **Проверка модели:**  
   Возьмите описание бизнес-процесса (из пункта 1) и ответьте на вопрос: *Где мы это храним?*  
   - Проверьте, что все сущности упомянуты в списке анкеров.  
   - Убедитесь, что существуют линки между сущностями.  
   - Пример проверки:  
     - *У нас есть тренеры и клиенты. Клиенты могут заказывать слоты у тренеров.*  
     - Убедитесь, что для каждой сущности и связи есть таблица или атрибут.

---

## Физическое моделирование

Для проверки вашей модели используйте:
- **Airtable** или опенсорсные low-code решения.  
  Это поможет оценить, насколько удобна ваша модель для дальнейшей работы.

---

## Стратегии проектирования таблиц

### Простая стратегия:
1. **Одна таблица на анкер.**
2. **Каждый атрибут — это колонка в таблице.**
3. **Линки:**
   - Для связи 1:N:  
     Добавьте внешний ключ в таблицу с N стороны.  
   - Для связи N:M:  
     Создайте отдельную таблицу, где хранятся первичные ключи обеих сущностей.

### Вторая стратегия:
Если таблица становится слишком большой, создайте новые таблицы с набором атрибутов, относящихся к конкретной части сущности.

### Третья стратегия:
Используйте **JSON**:
- В одной колонке может находиться произвольное количество атрибутов.  
- JSON может включать массивы, что позволяет использовать его для реализации линков.

